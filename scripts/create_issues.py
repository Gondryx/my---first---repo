#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
è‡ªåŠ¨åˆ›å»ºGitHub Issuesè„šæœ¬
"""

import requests
import json
import os
from typing import Dict, List

class GitHubIssuesCreator:
    def __init__(self, token: str, repo: str):
        """
        åˆå§‹åŒ–GitHub Issuesåˆ›å»ºå™¨
        
        Args:
            token: GitHubä¸ªäººè®¿é—®ä»¤ç‰Œ
            repo: ä»“åº“åç§° (æ ¼å¼: owner/repo)
        """
        self.token = token
        self.repo = repo
        self.base_url = "https://api.github.com"
        self.headers = {
            "Authorization": f"token {token}",
            "Accept": "application/vnd.github.v3+json",
            "Content-Type": "application/json"
        }
    
    def create_issue(self, title: str, body: str, labels: List[str] = None) -> Dict:
        """
        åˆ›å»ºå•ä¸ªIssue
        
        Args:
            title: Issueæ ‡é¢˜
            body: Issueå†…å®¹
            labels: æ ‡ç­¾åˆ—è¡¨
            
        Returns:
            åˆ›å»ºçš„Issueä¿¡æ¯
        """
        url = f"{self.base_url}/repos/{self.repo}/issues"
        data = {
            "title": title,
            "body": body
        }
        
        if labels:
            data["labels"] = labels
            
        response = requests.post(url, headers=self.headers, json=data)
        
        if response.status_code == 201:
            print(f"âœ… æˆåŠŸåˆ›å»ºIssue: {title}")
            return response.json()
        else:
            print(f"âŒ åˆ›å»ºIssueå¤±è´¥: {title}")
            print(f"é”™è¯¯ä¿¡æ¯: {response.text}")
            return None
    
    def create_all_issues(self):
        """åˆ›å»ºæ‰€æœ‰é¢„å®šä¹‰çš„Issues"""
        
        issues_data = [
            {
                "title": "ğŸš€ é«˜çº§æ•°æ®åˆ†æåŠŸèƒ½",
                "body": """## åŠŸèƒ½æè¿°
å®ç°æ›´é«˜çº§çš„æ•°æ®åˆ†æåŠŸèƒ½ï¼Œæå‡ç³»ç»Ÿçš„åˆ†æèƒ½åŠ›ã€‚

## åŠŸèƒ½éœ€æ±‚
- [ ] æƒ…æ„Ÿåˆ†æåŠŸèƒ½
- [ ] å…³é”®è¯æå–å’Œåˆ†æ
- [ ] ç”¨æˆ·ç”»åƒåˆ†æ
- [ ] ç«å“åˆ†æåŠŸèƒ½
- [ ] è¶‹åŠ¿é¢„æµ‹ç®—æ³•

## æŠ€æœ¯å®ç°
- é›†æˆNLTKæˆ–spaCyè¿›è¡Œæ–‡æœ¬åˆ†æ
- ä½¿ç”¨æœºå™¨å­¦ä¹ æ¨¡å‹è¿›è¡Œæƒ…æ„Ÿåˆ†æ
- å®ç°å…³é”®è¯æå–ç®—æ³•
- æ·»åŠ æ•°æ®å¯è§†åŒ–å›¾è¡¨

## ä¼˜å…ˆçº§
é«˜

## é¢„è®¡å·¥æ—¶
2-3å‘¨""",
                "labels": ["enhancement", "data-analysis", "priority-high"]
            },
            {
                "title": "ğŸ“Š å®æ—¶æ•°æ®ç›‘æ§",
                "body": """## åŠŸèƒ½æè¿°
å®ç°å®æ—¶æ•°æ®ç›‘æ§åŠŸèƒ½ï¼Œæ”¯æŒåŠ¨æ€æ•°æ®æ›´æ–°å’Œå¼‚å¸¸æ£€æµ‹ã€‚

## åŠŸèƒ½éœ€æ±‚
- [ ] å®æ—¶æ•°æ®æ›´æ–°æœºåˆ¶
- [ ] æ•°æ®ç›‘æ§é¢æ¿
- [ ] å¼‚å¸¸æ£€æµ‹ç®—æ³•
- [ ] é¢„è­¦æœºåˆ¶
- [ ] æ•°æ®æµå¤„ç†

## æŠ€æœ¯å®ç°
- ä½¿ç”¨WebSocketæˆ–è½®è¯¢æœºåˆ¶
- å®ç°æ•°æ®æµå¤„ç†ç®¡é“
- æ·»åŠ å¼‚å¸¸æ£€æµ‹ç®—æ³•
- åˆ›å»ºå®æ—¶ç›‘æ§ç•Œé¢

## ä¼˜å…ˆçº§
ä¸­

## é¢„è®¡å·¥æ—¶
3-4å‘¨""",
                "labels": ["enhancement", "real-time", "monitoring"]
            },
            {
                "title": "ğŸ“„ æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½",
                "body": """## åŠŸèƒ½æè¿°
å®ç°å¤šç§æ ¼å¼çš„æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½ï¼Œæ”¯æŒPDFã€Excelç­‰æ ¼å¼ã€‚

## åŠŸèƒ½éœ€æ±‚
- [ ] PDFæŠ¥å‘Šç”Ÿæˆ
- [ ] ExcelæŠ¥å‘Šå¯¼å‡º
- [ ] è‡ªå®šä¹‰æŠ¥å‘Šæ¨¡æ¿
- [ ] æŠ¥å‘Šå®šæ—¶å‘é€
- [ ] æŠ¥å‘Šé¢„è§ˆåŠŸèƒ½

## æŠ€æœ¯å®ç°
- ä½¿ç”¨reportlabæˆ–weasyprintç”ŸæˆPDF
- ä½¿ç”¨openpyxlæˆ–xlsxwriterç”ŸæˆExcel
- å®ç°æ¨¡æ¿å¼•æ“
- æ·»åŠ é‚®ä»¶å‘é€åŠŸèƒ½

## ä¼˜å…ˆçº§
ä¸­

## é¢„è®¡å·¥æ—¶
2å‘¨""",
                "labels": ["enhancement", "export", "reports"]
            },
            {
                "title": "ğŸ” ç”¨æˆ·æƒé™ç®¡ç†",
                "body": """## åŠŸèƒ½æè¿°
å®ç°å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒè§’è‰²ç®¡ç†å’Œæ•°æ®è®¿é—®æ§åˆ¶ã€‚

## åŠŸèƒ½éœ€æ±‚
- [ ] ç”¨æˆ·è§’è‰²ç®¡ç†
- [ ] æƒé™æ§åˆ¶æœºåˆ¶
- [ ] æ•°æ®è®¿é—®æ§åˆ¶
- [ ] æ“ä½œæ—¥å¿—è®°å½•
- [ ] ç”¨æˆ·ç»„ç®¡ç†

## æŠ€æœ¯å®ç°
- è®¾è®¡æƒé™æ¨¡å‹
- å®ç°RBACæƒé™ç³»ç»Ÿ
- æ·»åŠ æ“ä½œå®¡è®¡æ—¥å¿—
- åˆ›å»ºæƒé™ç®¡ç†ç•Œé¢

## ä¼˜å…ˆçº§
ä¸­

## é¢„è®¡å·¥æ—¶
2-3å‘¨""",
                "labels": ["enhancement", "security", "user-management"]
            },
            {
                "title": "ğŸ”„ æ•°æ®åŒæ­¥åŠŸèƒ½",
                "body": """## åŠŸèƒ½æè¿°
å®ç°å¤šå¹³å°æ•°æ®åŒæ­¥åŠŸèƒ½ï¼Œæ”¯æŒè‡ªåŠ¨æ•°æ®æ›´æ–°å’Œå¤‡ä»½æ¢å¤ã€‚

## åŠŸèƒ½éœ€æ±‚
- [ ] å¤šå¹³å°æ•°æ®åŒæ­¥
- [ ] è‡ªåŠ¨æ•°æ®æ›´æ–°
- [ ] æ•°æ®å¤‡ä»½æ¢å¤
- [ ] æ•°æ®ç‰ˆæœ¬ç®¡ç†
- [ ] åŒæ­¥çŠ¶æ€ç›‘æ§

## æŠ€æœ¯å®ç°
- å®ç°æ•°æ®åŒæ­¥API
- æ·»åŠ å®šæ—¶ä»»åŠ¡è°ƒåº¦
- å®ç°æ•°æ®å¤‡ä»½æœºåˆ¶
- åˆ›å»ºåŒæ­¥ç›‘æ§ç•Œé¢

## ä¼˜å…ˆçº§
ä½

## é¢„è®¡å·¥æ—¶
3-4å‘¨""",
                "labels": ["enhancement", "data-sync", "integration"]
            },
            {
                "title": "ğŸ› å¤§æ•°æ®é‡å¤„ç†æ€§èƒ½ä¼˜åŒ–",
                "body": """## é—®é¢˜æè¿°
å½“å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œç³»ç»Ÿå“åº”é€Ÿåº¦è¾ƒæ…¢ï¼Œéœ€è¦ä¼˜åŒ–æ€§èƒ½ã€‚

## é—®é¢˜è¡¨ç°
- æ•°æ®å¯¼å…¥é€Ÿåº¦æ…¢
- åˆ†æè¿‡ç¨‹å¡é¡¿
- å†…å­˜å ç”¨è¿‡é«˜
- ç•Œé¢å“åº”å»¶è¿Ÿ

## è§£å†³æ–¹æ¡ˆ
- [ ] å®ç°æ•°æ®åˆ†é¡µå¤„ç†
- [ ] ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜æœºåˆ¶
- [ ] å®ç°å¼‚æ­¥å¤„ç†
- [ ] ä¼˜åŒ–å†…å­˜ä½¿ç”¨

## ä¼˜å…ˆçº§
é«˜

## é¢„è®¡å·¥æ—¶
1-2å‘¨""",
                "labels": ["bug", "performance", "priority-high"]
            },
            {
                "title": "âš¡ ç•Œé¢å“åº”é€Ÿåº¦ä¼˜åŒ–",
                "body": """## é—®é¢˜æè¿°
æŸäº›ç•Œé¢æ“ä½œå“åº”è¾ƒæ…¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

## é—®é¢˜è¡¨ç°
- ç•Œé¢åˆ‡æ¢å»¶è¿Ÿ
- å›¾è¡¨åŠ è½½ç¼“æ…¢
- æŒ‰é’®å“åº”å»¶è¿Ÿ
- æ»šåŠ¨å¡é¡¿

## è§£å†³æ–¹æ¡ˆ
- [ ] ä¼˜åŒ–ç•Œé¢æ¸²æŸ“
- [ ] å®ç°æ‡’åŠ è½½
- [ ] æ·»åŠ åŠ è½½åŠ¨ç”»
- [ ] ä¼˜åŒ–äº‹ä»¶å¤„ç†
- [ ] ä½¿ç”¨å¤šçº¿ç¨‹å¤„ç†

## ä¼˜å…ˆçº§
ä¸­

## é¢„è®¡å·¥æ—¶
1å‘¨""",
                "labels": ["bug", "ui", "performance"]
            },
            {
                "title": "ğŸ’¬ é”™è¯¯æç¤ºä¿¡æ¯å®Œå–„",
                "body": """## é—®é¢˜æè¿°
éƒ¨åˆ†é”™è¯¯æç¤ºä¿¡æ¯ä¸å¤Ÿæ¸…æ™°ï¼Œç”¨æˆ·éš¾ä»¥ç†è§£é—®é¢˜åŸå› ã€‚

## é—®é¢˜è¡¨ç°
- é”™è¯¯ä¿¡æ¯è¿‡äºæŠ€æœ¯åŒ–
- ç¼ºå°‘è§£å†³æ–¹æ¡ˆæç¤º
- é”™è¯¯ä½ç½®ä¸æ˜ç¡®
- ç¼ºå°‘ç”¨æˆ·æŒ‡å¯¼

## è§£å†³æ–¹æ¡ˆ
- [ ] ä¼˜åŒ–é”™è¯¯ä¿¡æ¯æ–‡æ¡ˆ
- [ ] æ·»åŠ è§£å†³æ–¹æ¡ˆæç¤º
- [ ] å®ç°é”™è¯¯å®šä½åŠŸèƒ½
- [ ] åˆ›å»ºé”™è¯¯å¤„ç†æŒ‡å—
- [ ] æ·»åŠ ç”¨æˆ·å¸®åŠ©æ–‡æ¡£

## ä¼˜å…ˆçº§
ä¸­

## é¢„è®¡å·¥æ—¶
1å‘¨""",
                "labels": ["bug", "user-experience", "documentation"]
            },
            {
                "title": "ğŸ§ª å…¼å®¹æ€§æµ‹è¯•",
                "body": """## é—®é¢˜æè¿°
éœ€è¦åœ¨ä¸åŒæ“ä½œç³»ç»Ÿå’ŒPythonç‰ˆæœ¬ä¸Šè¿›è¡Œå…¼å®¹æ€§æµ‹è¯•ã€‚

## æµ‹è¯•èŒƒå›´
- [ ] Windows 10/11
- [ ] macOS
- [ ] Linux (Ubuntu/CentOS)
- [ ] Python 3.9/3.10/3.11
- [ ] ä¸åŒåˆ†è¾¨ç‡å±å¹•

## æµ‹è¯•å†…å®¹
- [ ] å®‰è£…éƒ¨ç½²æµ‹è¯•
- [ ] åŠŸèƒ½è¿è¡Œæµ‹è¯•
- [ ] æ€§èƒ½å¯¹æ¯”æµ‹è¯•
- [ ] ç•Œé¢æ˜¾ç¤ºæµ‹è¯•
- [ ] é”™è¯¯å¤„ç†æµ‹è¯•

## ä¼˜å…ˆçº§
ä¸­

## é¢„è®¡å·¥æ—¶
1å‘¨""",
                "labels": ["bug", "testing", "compatibility"]
            },
            {
                "title": "ğŸ“š æ–‡æ¡£å®Œå–„",
                "body": """## åŠŸèƒ½æè¿°
éœ€è¦å®Œå–„ç”¨æˆ·æ‰‹å†Œã€APIæ–‡æ¡£å’Œéƒ¨ç½²æ–‡æ¡£ã€‚

## æ–‡æ¡£éœ€æ±‚
- [ ] ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
- [ ] APIæ¥å£æ–‡æ¡£
- [ ] éƒ¨ç½²å®‰è£…æŒ‡å—
- [ ] æ•…éšœæ’é™¤æŒ‡å—
- [ ] å¼€å‘è€…æ–‡æ¡£

## å†…å®¹è¦æ±‚
- [ ] è¯¦ç»†çš„æ“ä½œæ­¥éª¤
- [ ] æˆªå›¾å’Œç¤ºä¾‹
- [ ] å¸¸è§é—®é¢˜è§£ç­”
- [ ] è§†é¢‘æ•™ç¨‹
- [ ] å¤šè¯­è¨€æ”¯æŒ

## ä¼˜å…ˆçº§
ä½

## é¢„è®¡å·¥æ—¶
2å‘¨""",
                "labels": ["documentation", "user-guide"]
            }
        ]
        
        print("ğŸš€ å¼€å§‹åˆ›å»ºGitHub Issues...")
        print(f"ğŸ“ ç›®æ ‡ä»“åº“: {self.repo}")
        print("=" * 50)
        
        created_count = 0
        failed_count = 0
        
        for i, issue_data in enumerate(issues_data, 1):
            print(f"\nğŸ“ åˆ›å»ºIssue {i}/{len(issues_data)}: {issue_data['title']}")
            
            result = self.create_issue(
                title=issue_data['title'],
                body=issue_data['body'],
                labels=issue_data['labels']
            )
            
            if result:
                created_count += 1
            else:
                failed_count += 1
        
        print("\n" + "=" * 50)
        print(f"âœ… åˆ›å»ºæˆåŠŸ: {created_count} ä¸ª")
        print(f"âŒ åˆ›å»ºå¤±è´¥: {failed_count} ä¸ª")
        print(f"ğŸ“Š æ€»è®¡: {len(issues_data)} ä¸ª")
        
        if created_count > 0:
            print(f"\nğŸ‰ Issuesåˆ›å»ºå®Œæˆï¼")
            print(f"ğŸ”— æŸ¥çœ‹Issues: https://github.com/{self.repo}/issues")

def main():
    """ä¸»å‡½æ•°"""
    print("ğŸ¤– GitHub Issues è‡ªåŠ¨åˆ›å»ºå·¥å…·")
    print("=" * 40)
    
    # è·å–GitHub Token
    token = input("è¯·è¾“å…¥GitHubä¸ªäººè®¿é—®ä»¤ç‰Œ (Personal Access Token): ").strip()
    if not token:
        print("âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„GitHub Token")
        return
    
    # è·å–ä»“åº“ä¿¡æ¯
    repo = input("è¯·è¾“å…¥ä»“åº“åç§° (æ ¼å¼: owner/repo): ").strip()
    if not repo or '/' not in repo:
        print("âŒ è¯·è¾“å…¥æ­£ç¡®çš„ä»“åº“åç§°æ ¼å¼ï¼Œä¾‹å¦‚: Gondryx/my---first---repo")
        return
    
    # åˆ›å»ºIssues
    creator = GitHubIssuesCreator(token, repo)
    creator.create_all_issues()

if __name__ == "__main__":
    main() 